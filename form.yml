# Batch Connect app configuration file
#
# @note Used to define the submitted cluster, title, description, and
#   hard-coded/user-defined attributes that make up this Batch Connect app.
---

# **MUST** set cluster id here that matches cluster configuration file located
# under /etc/ood/config/clusters.d/*.yml
#     cluster: "owens"
cluster: "borah"
cacheable: false
form:
  - modules
  - extra_jupyter_args
  - bc_account
  - bc_queue
  - node_type
  - bc_num_hours
  - num_cores
  - jupyterlab_switch
  - bc_email_on_started
attributes:
  modules: "jupyter/4.9.2"

  # Any extra command line arguments to feed to the `jupyter notebook ...`
  # command that launches the Jupyter notebook within the batch job
  extra_jupyter_args: ""
  bc_account: ""
  bc_queue: "ondemand"
  num_cores:
    widget: hidden_field
  node_type:
    value: "CPU"
    widget: select
    label: "Node type"
    help: |
      - **CPU only** <br>
        Standard Borah nodes have 48 cores and 186 GB of memory.
        By selecting a "CPU" session, you will be given 4 CPU cores.
      - **GPU enabled** <br>
        These are HPC nodes with 2 [NVIDIA Tesla P100 GPUs], 28 cores, and
        251 GB of memory.
        By selecting a "GPU" session, you will be given 14 cores and 1 GPU.
        [NVIDIA Tesla P100 GPU]: http://www.nvidia.com/object/tesla-p100.html
    options:
      - [
          "CPU",     "cpu",
          data-set-num-cores: 4
        ]
      - [
          "GPU",     "gpu",
          data-set-num-cores: 14
        ]
  bc_num_hours:
    value: 1
    min: 1
    max: 4
  jupyterlab_switch:
    widget: "check_box"
    value: 1
    label: Use JupyterLab instead of Jupyter Notebook?
    help: |
      JupyterLab is the next generation of Jupyter with an IDE-like experience, and is completely compatible with existing Jupyter Notebooks.
